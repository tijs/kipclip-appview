import{createRoot as it}from"https://esm.sh/react-dom@19/client";import{useEffect as We,useState as we}from"https://esm.sh/react@19";import{useEffect as _e,useRef as Ve,useState as ve}from"https://esm.sh/react@19";import{jsx as G,jsxs as se}from"https://esm.sh/react@19/jsx-runtime";function qe(t){let l=t.trim();return l?l.includes(".")?/^[a-zA-Z0-9][a-zA-Z0-9.-]*[a-zA-Z0-9]$/.test(l)?l.includes("..")?{valid:!1,error:"Handle cannot contain consecutive dots"}:{valid:!0}:{valid:!1,error:"Handle contains invalid characters"}:{valid:!1,error:"Handle must include a domain (e.g., alice.bsky.social)"}:{valid:!1,error:"Handle is required"}}function Ne(){let[t,l]=ve(""),[a,m]=ve(!1),[r,u]=ve(null),d=Ve(null);_e(()=>{let v=d.current;if(!v)return;let y=()=>{l(v.value)};return v.addEventListener("input",y),()=>v.removeEventListener("input",y)},[]);function k(v){v.preventDefault(),u(null);let y=d.current?.value||t;if(!y.trim())return;let p=qe(y);if(!p.valid){u(p.error||"Invalid handle format");return}m(!0);try{let n=new URLSearchParams(globalThis.location.search).get("redirect"),j=`/login?handle=${encodeURIComponent(y.trim())}`;n&&(j+=`&redirect=${encodeURIComponent(n)}`),globalThis.location.href=j}catch(c){console.error("Login failed:",c),u("Login failed. Please try again."),m(!1)}}return G("div",{className:"min-h-screen flex items-center justify-center px-4",children:se("div",{className:"max-w-md w-full",children:[se("div",{className:"text-center mb-8 fade-in",children:[G("img",{src:"https://res.cloudinary.com/dru3aznlk/image/upload/v1760376452/kip-satchel-transparent_ewnh0j.png",alt:"kipclip mascot - a friendly chicken with a bookmark bag",className:"w-48 h-48 mx-auto mb-6 object-contain"}),G("h1",{className:"text-4xl font-bold mb-2",style:{color:"var(--coral)"},children:"kipclip"}),G("p",{className:"text-gray-600",children:"You find it, you kip it"})]}),se("div",{className:"card fade-in",children:[se("form",{onSubmit:k,className:"space-y-4",children:[se("div",{children:[G("label",{htmlFor:"handle",className:"block text-sm font-medium text-gray-700 mb-2",children:"Your Bluesky or AT Protocol handle"}),G("actor-typeahead",{children:G("input",{ref:d,type:"text",id:"handle",placeholder:"alice.bsky.social or your-domain.com",className:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-coral focus:border-transparent outline-none transition",disabled:a,autoFocus:!0})})]}),r&&G("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm",children:r}),G("button",{type:"submit",disabled:a||!t.trim(),className:"btn-primary w-full disabled:opacity-50 disabled:cursor-not-allowed",children:a?se("span",{className:"flex items-center justify-center gap-2",children:[G("div",{className:"spinner w-5 h-5 border-2"}),"Connecting..."]}):"Sign in"})]}),G("div",{className:"mt-6 text-center text-sm text-gray-500 space-y-3",children:se("p",{children:["kipclip works with your Bluesky account or any AT Protocol handle. Your bookmarks are saved to your own personal data server, so you own and control your data."," ",G("a",{href:"/faq",className:"underline hover:text-gray-700",children:"Learn more"})]})})]})]})})}import{useEffect as Ze,useRef as Xe,useState as ne}from"https://esm.sh/react@19";import{useState as xe}from"https://esm.sh/react@19";import{jsx as Z,jsxs as de}from"https://esm.sh/react@19/jsx-runtime";function Te({onClose:t,onBookmarkAdded:l}){let[a,m]=xe(""),[r,u]=xe(!1),[d,k]=xe(null);async function v(y){if(y.preventDefault(),!!a.trim()){u(!0),k(null);try{let p=await fetch("/api/bookmarks",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:a.trim()})});if(!p.ok){let n=await p.json();throw new Error(n.error||"Failed to add bookmark")}let c=await p.json();l(c.bookmark)}catch(p){k(p.message),u(!1)}}}return Z("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:de("div",{className:"bg-white rounded-lg max-w-md w-full p-6 fade-in",children:[de("div",{className:"flex items-center justify-between mb-4",children:[Z("h3",{className:"text-xl font-bold text-gray-800",children:"Add Bookmark"}),Z("button",{type:"button",onClick:t,className:"text-gray-400 hover:text-gray-600 text-2xl",disabled:r,children:"\xD7"})]}),de("form",{onSubmit:v,className:"space-y-4",children:[de("div",{children:[Z("label",{htmlFor:"url",className:"block text-sm font-medium text-gray-700 mb-2",children:"URL"}),Z("input",{type:"url",id:"url",value:a,onChange:y=>m(y.target.value),placeholder:"https://example.com",className:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-coral focus:border-transparent outline-none transition",disabled:r,autoFocus:!0,required:!0})]}),d&&Z("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm",children:d}),de("div",{className:"flex gap-3",children:[Z("button",{type:"button",onClick:t,className:"flex-1 px-4 py-3 rounded-lg border border-gray-300 text-gray-700 font-medium hover:bg-gray-50 transition",disabled:r,children:"Cancel"}),Z("button",{type:"submit",className:"flex-1 btn-primary disabled:opacity-50",disabled:r||!a.trim(),children:r?de("span",{className:"flex items-center justify-center gap-2",children:[Z("div",{className:"spinner w-5 h-5 border-2"}),"Adding..."]}):"Add Bookmark"})]})]}),Z("p",{className:"text-xs text-gray-500 mt-4 text-center",children:"The page title will be automatically fetched and saved with your bookmark"})]})})}import{useState as ee}from"https://esm.sh/react@19";import{jsx as M,jsxs as q}from"https://esm.sh/react@19/jsx-runtime";function Ce({bookmark:t,availableTags:l,onClose:a,onBookmarkUpdated:m,onBookmarkDeleted:r,onTagsChanged:u}){let[d,k]=ee(t.tags||[]),[v,y]=ee(""),[p,c]=ee(!1),[n,j]=ee(!1),[R,w]=ee(null),[e,i]=ee(t.title||""),[C,S]=ee(t.subject),[I,V]=ee(t.description||""),J=l.filter(b=>b.value.toLowerCase().includes(v.toLowerCase())&&!d.includes(b.value)).slice(0,5);function B(b){b&&!d.includes(b)&&(k([...d,b]),y(""),c(!1))}function o(b){k(d.filter(h=>h!==b))}function f(b){b.key==="Enter"?(b.preventDefault(),J.length>0?B(J[0].value):v.trim()&&B(v.trim())):b.key==="Escape"&&c(!1)}async function A(){j(!0),w(null);try{let b=new Set(l.map(z=>z.value)),h=d.filter(z=>!b.has(z));for(let z of h)try{await fetch("/api/tags",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({value:z})})}catch(re){console.error(`Failed to create tag record for "${z}":`,re)}let g=t.uri.split("/").pop(),F=await fetch(`/api/bookmarks/${g}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({tags:d,title:e,url:C,description:I})});if(!F.ok)throw new Error("Failed to update bookmark");let U=await F.json();h.length>0&&u&&u(),m(U.bookmark)}catch(b){w(b.message),j(!1)}}async function ge(){if(confirm("Are you sure you want to delete this bookmark?")){j(!0),w(null);try{let b=t.uri.split("/").pop();if(!(await fetch(`/api/bookmarks/${b}`,{method:"DELETE"})).ok)throw new Error("Failed to delete bookmark");r(t.uri)}catch(b){w(b.message),j(!1)}}}return M("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:q("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto fade-in",children:[M("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4",children:q("div",{className:"flex items-center justify-between",children:[M("h3",{className:"text-xl font-bold text-gray-800",children:"Edit Bookmark"}),M("button",{type:"button",onClick:a,className:"text-gray-400 hover:text-gray-600 text-2xl",disabled:n,children:"\xD7"})]})}),q("div",{className:"px-6 py-4 space-y-4",children:[q("div",{children:[M("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title"}),M("input",{type:"text",value:e,onChange:b=>i(b.target.value),placeholder:"Enter bookmark title",className:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-coral focus:border-transparent outline-none transition",disabled:n})]}),q("div",{children:[M("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"URL"}),M("input",{type:"url",value:C,onChange:b=>S(b.target.value),placeholder:"https://example.com",className:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-coral focus:border-transparent outline-none transition",disabled:n})]}),q("div",{children:[M("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),M("textarea",{value:I,onChange:b=>V(b.target.value),placeholder:"Enter bookmark description (optional)",rows:3,className:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-coral focus:border-transparent outline-none transition resize-y",disabled:n})]}),q("div",{children:[M("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tags"}),d.length>0&&M("div",{className:"flex flex-wrap gap-2 mb-3",children:d.map(b=>q("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full bg-gray-100 text-gray-700 text-sm",children:[b,M("button",{type:"button",onClick:()=>o(b),className:"text-gray-500 hover:text-red-600 ml-1",disabled:n,children:"\xD7"})]},b))}),q("div",{className:"relative",children:[M("input",{type:"text",value:v,onChange:b=>{y(b.target.value),c(!0)},onKeyDown:f,onFocus:()=>c(!0),onBlur:()=>setTimeout(()=>c(!1),200),placeholder:"Add tags...",className:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-coral focus:border-transparent outline-none transition",disabled:n}),p&&J.length>0&&M("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:J.map(b=>M("button",{type:"button",onClick:()=>B(b.value),className:"w-full text-left px-4 py-2 hover:bg-gray-50 text-gray-700 text-sm",children:b.value},b.uri))})]}),M("p",{className:"text-xs text-gray-500 mt-2",children:"Type to search existing tags or press Enter to create a new one"})]}),q("div",{className:"text-xs text-gray-400 pt-2",children:["Created ",new Date(t.createdAt).toLocaleDateString()," at"," ",new Date(t.createdAt).toLocaleTimeString()]}),R&&M("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm",children:R})]}),q("div",{className:"sticky bottom-0 bg-white border-t border-gray-200 px-6 py-4 space-y-3",children:[q("div",{className:"flex gap-3",children:[M("button",{type:"button",onClick:a,className:"flex-1 px-4 py-3 rounded-lg border border-gray-300 text-gray-700 font-medium hover:bg-gray-50 transition",disabled:n,children:"Cancel"}),M("button",{type:"button",onClick:A,className:"flex-1 btn-primary disabled:opacity-50",disabled:n,children:n?q("span",{className:"flex items-center justify-center gap-2",children:[M("div",{className:"spinner w-5 h-5 border-2"}),"Saving..."]}):"Save Changes"})]}),M("button",{type:"button",onClick:ge,className:"w-full px-4 py-3 rounded-lg bg-red-50 text-red-600 font-medium hover:bg-red-100 transition border border-red-200",disabled:n,children:"Delete Bookmark"})]})]})})}import{createContext as Je,useContext as Ge,useState as ue}from"https://esm.sh/react@19";async function Ke(t,l){let a=await fetch(t,l);if(a.status===401){console.warn("Session expired, redirecting to login");try{globalThis.location.href="/"}catch(m){console.error("Failed to redirect after session expiry:",m)}return a}return a}function he(t){return Ke(t)}import{jsx as Qe}from"https://esm.sh/react@19/jsx-runtime";var Se=Je(null);function Ee({children:t}){let[l,a]=ue(null),[m,r]=ue([]),[u,d]=ue([]),[k,v]=ue(new Set),[y,p]=ue(!0);async function c(){try{let o=await he("/api/bookmarks");if(!o.ok)throw new Error("Failed to load bookmarks");let f=await o.json();r(f.bookmarks)}catch(o){throw console.error("Failed to load bookmarks:",o),o}}function n(o){r(f=>[o,...f])}function j(o){r(f=>f.map(A=>A.uri===o.uri?o:A))}function R(o){r(f=>f.filter(A=>A.uri!==o))}async function w(){try{let o=await he("/api/tags");if(!o.ok)throw new Error("Failed to load tags");let f=await o.json();d(f.tags)}catch(o){throw console.error("Failed to load tags:",o),o}}function e(o){d(f=>[o,...f])}function i(o){d(f=>f.map(A=>A.uri===o.uri?o:A))}function C(o){d(f=>f.filter(A=>A.uri!==o))}async function S(){try{let o=await he("/api/initial-data");if(!o.ok)throw new Error("Failed to load initial data");let f=await o.json();r(f.bookmarks),d(f.tags)}catch(o){throw console.error("Failed to load initial data:",o),o}}function I(o){v(f=>{let A=new Set(f);return A.has(o)?A.delete(o):A.add(o),A})}function V(){v(new Set)}let J=k.size===0?m:m.filter(o=>[...k].every(f=>o.tags?.includes(f))),B={session:l,bookmarks:m,tags:u,selectedTags:k,loading:y,setSession:a,setBookmarks:r,addBookmark:n,updateBookmark:j,deleteBookmark:R,loadBookmarks:c,setTags:d,addTag:e,updateTag:i,deleteTag:C,loadTags:w,loadInitialData:S,toggleTag:I,clearFilters:V,filteredBookmarks:J};return Qe(Se.Provider,{value:B,children:t})}function te(){let t=Ge(Se);if(!t)throw new Error("useApp must be used within AppProvider");return t}import{jsx as E,jsxs as W}from"https://esm.sh/react@19/jsx-runtime";function Le(){let{filteredBookmarks:t,tags:l,addBookmark:a,updateBookmark:m,deleteBookmark:r,loadBookmarks:u,loadTags:d}=te(),[k,v]=ne(!1),[y,p]=ne(null),[c,n]=ne(null),[j,R]=ne(null),[w,e]=ne(0),[i,C]=ne(!1),[S,I]=ne(!1),V=Xe(0);Ze(()=>{function h(){let z=document.querySelector("main"),re=globalThis.scrollY===0,le=!z||z.scrollTop===0;return re&&le}function g(z){h()&&(V.current=z.touches[0].clientY,C(!0))}function F(z){if(!i||S)return;let le=z.touches[0].clientY-V.current;le>0&&h()&&(z.preventDefault(),e(Math.min(le,120)))}function U(){i&&(C(!1),w>80?(I(!0),J().finally(()=>{I(!1),e(0)})):e(0))}return document.addEventListener("touchstart",g,{passive:!0}),document.addEventListener("touchmove",F,{passive:!1}),document.addEventListener("touchend",U),()=>{document.removeEventListener("touchstart",g),document.removeEventListener("touchmove",F),document.removeEventListener("touchend",U)}},[i,w,S]);async function J(){n(null);try{await u()}catch(h){n(h.message)}}function B(h){m(h),p(null)}function o(h){r(h),p(null)}function f(h){a(h),v(!1)}async function A(h,g){try{let F=h.split("/").pop();if(!F)throw new Error("Invalid bookmark URI");let U=t.find(Ye=>Ye.uri===h);if(!U)throw new Error("Bookmark not found");if(U.tags?.includes(g))return;let z=[...U.tags||[],g],re=await fetch(`/api/bookmarks/${F}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({tags:z})});if(!re.ok)throw new Error("Failed to update bookmark tags");let le=await re.json();m(le.bookmark)}catch(F){console.error("Failed to add tag to bookmark:",F),alert(`Failed to add tag: ${F.message}`)}}function ge(h,g){h.stopPropagation(),globalThis.open(g,"_blank","noopener,noreferrer")}async function b(h,g){h.stopPropagation();let F={title:g.title||new URL(g.subject).hostname,text:g.description?`${g.title||new URL(g.subject).hostname}

${g.description}`:g.title||new URL(g.subject).hostname,url:g.subject};if(navigator.share)try{await navigator.share(F)}catch(U){U.name!=="AbortError"&&console.error("Share failed:",U)}else try{let U=`${F.title}
${F.text}
${F.url}`;await navigator.clipboard.writeText(U),alert("Link copied to clipboard!")}catch(U){console.error("Failed to copy:",U),alert("Sharing not supported on this browser")}}return c?W("div",{className:"text-center py-20",children:[W("p",{className:"text-red-600 mb-4",children:["Error: ",c]}),E("button",{type:"button",onClick:J,className:"btn-primary",children:"Try Again"})]}):W("div",{className:"fade-in",children:[E("div",{style:{position:"fixed",top:0,left:0,right:0,height:`${w}px`,display:w>0?"flex":"none",alignItems:"center",justifyContent:"center",backgroundColor:"var(--coral)",color:"white",zIndex:40,transition:i?"none":"height 0.3s ease-out"},children:S?E("div",{className:"spinner",style:{borderColor:"white transparent transparent transparent"}}):E("span",{style:{fontSize:"24px"},children:w>80?"\u2193":"\u2191"})}),W("div",{className:"mb-6",children:[W("div",{className:"hidden md:flex items-center justify-between",children:[W("h2",{className:"text-2xl font-bold text-gray-800",children:["Your Bookmarks",W("span",{className:"text-sm font-normal text-gray-500 ml-3",children:[t.length," ",t.length===1?"bookmark":"bookmarks"]})]}),E("button",{type:"button",onClick:()=>v(!0),className:"btn-primary",children:"+ Add Bookmark"})]}),W("div",{className:"md:hidden",children:[W("div",{className:"flex items-center justify-between mb-2",children:[E("h2",{className:"text-2xl font-bold text-gray-800",children:"Your Bookmarks"}),E("button",{type:"button",onClick:()=>v(!0),className:"px-3 py-2 text-sm rounded-md",style:{backgroundColor:"var(--coral)",color:"white"},children:"+ Add"})]}),W("p",{className:"text-sm text-gray-500",children:[t.length," ",t.length===1?"bookmark":"bookmarks"]})]})]}),t.length===0?W("div",{className:"text-center py-20",children:[E("div",{className:"mb-6",children:E("span",{className:"text-6xl",children:"\u{1F4DA}"})}),E("h3",{className:"text-xl font-semibold text-gray-700 mb-2",children:"No bookmarks yet"}),E("p",{className:"text-gray-500 mb-6",children:"Start collecting your favorite links!"}),E("button",{type:"button",onClick:()=>v(!0),className:"btn-primary",children:"Add Your First Bookmark"})]}):E("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(h=>W("div",{className:`card hover:scale-[1.02] transition-all cursor-pointer group relative ${j===h.uri?"border-2 border-blue-500 bg-blue-50":""}`,onClick:()=>p(h),onDragOver:g=>{g.preventDefault(),g.dataTransfer.dropEffect="copy"},onDragEnter:g=>{g.preventDefault(),R(h.uri)},onDragLeave:g=>{g.preventDefault(),g.currentTarget===g.target&&R(null)},onDrop:g=>{g.preventDefault(),R(null);let F=g.dataTransfer.getData("text/plain");F&&A(h.uri,F)},children:[W("div",{className:"mb-3",children:[E("h3",{className:"font-semibold text-gray-800 truncate mb-1",children:h.title||new URL(h.subject).hostname}),E("div",{className:"text-sm text-gray-500 truncate",children:h.subject})]}),E("div",{className:"text-xs text-gray-400",children:new Date(h.createdAt).toLocaleDateString()}),h.tags&&h.tags.length>0&&E("div",{className:"flex flex-wrap gap-1 mt-2",children:h.tags.map((g,F)=>E("span",{className:"px-2 py-1 text-xs rounded-full bg-gray-100 text-gray-700",children:g},F))}),W("div",{className:"hidden md:group-hover:flex absolute bottom-2 right-2 gap-1",children:[E("button",{type:"button",onClick:g=>ge(g,h.subject),className:"w-7 h-7 flex items-center justify-center text-gray-600 hover:text-gray-900 bg-white/90 hover:bg-white rounded-md transition-colors shadow-sm",title:"Visit bookmark",children:E("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})}),E("button",{type:"button",onClick:g=>b(g,h),className:"w-7 h-7 flex items-center justify-center text-gray-600 hover:text-gray-900 bg-white/90 hover:bg-white rounded-md transition-colors shadow-sm",title:"Share bookmark",children:E("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"})})})]}),W("div",{className:"flex md:hidden absolute bottom-2 right-2 gap-1",children:[E("button",{type:"button",onClick:g=>ge(g,h.subject),className:"w-8 h-8 flex items-center justify-center text-gray-600 hover:text-gray-900 bg-white/90 hover:bg-white rounded-md transition-colors shadow-sm",title:"Visit bookmark",children:E("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})}),E("button",{type:"button",onClick:g=>b(g,h),className:"w-8 h-8 flex items-center justify-center text-gray-600 hover:text-gray-900 bg-white/90 hover:bg-white rounded-md transition-colors shadow-sm",title:"Share bookmark",children:E("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"})})})]})]},h.uri))}),k&&E(Te,{onClose:()=>v(!1),onBookmarkAdded:f}),y&&E(Ce,{bookmark:y,availableTags:l,onClose:()=>p(null),onBookmarkUpdated:B,onBookmarkDeleted:o,onTagsChanged:d})]})}import{useEffect as et,useRef as tt,useState as at}from"https://esm.sh/react@19";import{jsx as Y,jsxs as ae}from"https://esm.sh/react@19/jsx-runtime";function Be({handle:t,onLogout:l}){let[a,m]=at(!1),r=tt(null);return et(()=>{function u(d){r.current&&!r.current.contains(d.target)&&m(!1)}return a&&document.addEventListener("mousedown",u),()=>{document.removeEventListener("mousedown",u)}},[a]),ae("div",{className:"relative",ref:r,children:[ae("button",{type:"button",onClick:()=>m(!a),className:"hidden md:flex items-center gap-2 px-3 py-2 rounded-lg hover:bg-gray-100 transition-colors","aria-expanded":a,"aria-haspopup":"true",children:[ae("span",{className:"text-sm font-medium text-gray-700",children:["@",t]}),Y("svg",{className:`w-4 h-4 text-gray-500 transition-transform ${a?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Y("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),Y("button",{type:"button",onClick:()=>m(!a),className:"md:hidden p-2 rounded-lg hover:bg-gray-100 transition-colors","aria-expanded":a,"aria-haspopup":"true","aria-label":"Menu",children:Y("svg",{className:"w-6 h-6 text-gray-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a?Y("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}):Y("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),a&&ae("div",{className:"absolute right-0 mt-2 w-56 bg-white rounded-lg shadow-lg border border-gray-200 py-1 z-50",children:[Y("div",{className:"md:hidden px-4 py-3 border-b border-gray-200",children:ae("p",{className:"text-sm font-medium text-gray-900",children:["@",t]})}),ae("a",{href:"/tools",className:"flex items-center gap-2 w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors",onClick:()=>m(!1),children:[Y("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Y("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),"Tools"]}),ae("a",{href:"/about",className:"flex items-center gap-2 w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors",onClick:()=>m(!1),children:[Y("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Y("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M12 2a10 10 0 100 20 10 10 0 000-20z"})}),"About"]}),ae("a",{href:"/faq",className:"flex items-center gap-2 w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors",onClick:()=>m(!1),children:[Y("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Y("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"FAQ"]}),Y("button",{type:"button",onClick:()=>{m(!1),l()},className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors",children:"Logout"})]})]})}import{useState as be}from"https://esm.sh/react@19";import{useState as ke}from"https://esm.sh/react@19";import{jsx as X,jsxs as ie}from"https://esm.sh/react@19/jsx-runtime";function je({onClose:t,onTagAdded:l}){let[a,m]=ke(""),[r,u]=ke(!1),[d,k]=ke(null);async function v(y){if(y.preventDefault(),!!a.trim()){u(!0),k(null);try{let p=await fetch("/api/tags",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({value:a.trim()})});if(!p.ok){let n=await p.json();throw new Error(n.error||"Failed to add tag")}let c=await p.json();l(c.tag)}catch(p){k(p.message),u(!1)}}}return X("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:ie("div",{className:"bg-white rounded-lg max-w-md w-full p-6 fade-in",children:[ie("div",{className:"flex items-center justify-between mb-4",children:[X("h3",{className:"text-xl font-bold text-gray-800",children:"Create Tag"}),X("button",{type:"button",onClick:t,className:"text-gray-400 hover:text-gray-600 text-2xl",disabled:r,children:"\xD7"})]}),ie("form",{onSubmit:v,className:"space-y-4",children:[ie("div",{children:[X("label",{htmlFor:"tag-value",className:"block text-sm font-medium text-gray-700 mb-2",children:"Tag Name"}),X("input",{type:"text",id:"tag-value",value:a,onChange:y=>m(y.target.value),placeholder:"e.g., work, personal, reading",maxLength:64,className:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-coral focus:border-transparent outline-none transition",disabled:r,autoFocus:!0,required:!0}),ie("p",{className:"text-xs text-gray-500 mt-1",children:[a.length,"/64 characters"]})]}),d&&X("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm",children:d}),ie("div",{className:"flex gap-3",children:[X("button",{type:"button",onClick:t,className:"flex-1 px-4 py-3 rounded-lg border border-gray-300 text-gray-700 font-medium hover:bg-gray-50 transition",disabled:r,children:"Cancel"}),X("button",{type:"submit",className:"flex-1 btn-primary disabled:opacity-50",disabled:r||!a.trim(),children:r?ie("span",{className:"flex items-center justify-center gap-2",children:[X("div",{className:"spinner w-5 h-5 border-2"}),"Creating..."]}):"Create Tag"})]})]})]})})}import{useState as fe}from"https://esm.sh/react@19";import{jsx as oe,jsxs as ce}from"https://esm.sh/react@19/jsx-runtime";function Ae({tag:t,onClose:l,onTagUpdated:a,onTagDeleted:m}){let{loadBookmarks:r}=te(),[u,d]=fe(t.value),[k,v]=fe(!1),[y,p]=fe(!1),[c,n]=fe(null),j=t.uri.split("/").pop();async function R(e){if(e.preventDefault(),!u.trim()){n("Tag value cannot be empty");return}let i=u.trim(),C=i!==t.value;if(!C){l();return}v(!0),n(null);try{let S=await fetch(`/api/tags/${j}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({value:i})});if(!S.ok){let V=await S.json();throw new Error(V.error||"Failed to update tag")}let I=await S.json();C&&await r(),I.tag&&a(I.tag)}catch(S){n(S.message),v(!1)}}async function w(){p(!0),n(null);try{let e=await fetch(`/api/tags/${j}/usage`);if(!e.ok)throw new Error("Failed to check tag usage");let C=(await e.json()).count||0,S=`Delete tag "${t.value}"?`;if(C>0&&(S+=`

This tag is used on ${C} bookmark${C===1?"":"s"} and will be removed from ${C===1?"it":"all of them"}.`,S+=`

This action cannot be undone.`),!confirm(S)){p(!1);return}let I=await fetch(`/api/tags/${j}`,{method:"DELETE"});if(!I.ok){let V=await I.json();throw new Error(V.error||"Failed to delete tag")}C>0&&await r(),m(t.uri)}catch(e){n(e.message),p(!1)}}return oe("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",onClick:l,children:ce("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full p-6",onClick:e=>e.stopPropagation(),children:[oe("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"Edit Tag"}),ce("form",{onSubmit:R,children:[ce("div",{className:"mb-4",children:[oe("label",{htmlFor:"tag-value",className:"block text-sm font-medium text-gray-700 mb-2",children:"Tag Value"}),oe("input",{id:"tag-value",type:"text",value:u,onChange:e=>d(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter tag value",maxLength:64,disabled:k||y,autoFocus:!0}),ce("p",{className:"text-xs text-gray-500 mt-1",children:[u.length,"/64 characters"]})]}),c&&oe("div",{className:"mb-4 bg-red-50 border border-red-200 text-red-700 px-3 py-2 rounded text-sm",children:c}),ce("div",{className:"flex gap-2 justify-between",children:[oe("button",{type:"button",onClick:w,disabled:k||y,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition text-sm font-medium",children:y?"Deleting...":"Delete"}),ce("div",{className:"flex gap-2",children:[oe("button",{type:"button",onClick:l,disabled:k||y,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 disabled:opacity-50 disabled:cursor-not-allowed transition text-sm font-medium",children:"Cancel"}),oe("button",{type:"submit",disabled:k||y||!u.trim(),className:"px-4 py-2 btn-primary disabled:opacity-50 disabled:cursor-not-allowed text-sm font-medium",children:k?"Saving...":"Save"})]})]})]})]})})}function Pe(t){if(t.length===0)throw new Error("Cannot encode empty tags array");let a=[...t].sort().join("|");return btoa(a).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"~")}import{Fragment as De,jsx as L,jsxs as _}from"https://esm.sh/react@19/jsx-runtime";function Me(){let{tags:t,selectedTags:l,toggleTag:a,clearFilters:m,loadTags:r,addTag:u,updateTag:d,deleteTag:k,session:v}=te(),[y,p]=be(!1),[c,n]=be(null),[j,R]=be(null),[w,e]=be(!1);async function i(){e(!0),R(null);try{await r()}catch(B){R(B.message)}finally{e(!1)}}function C(B){u(B),p(!1)}function S(B){d(B),n(null)}function I(B){k(B),n(null)}async function V(){if(!(!v||l.size===0))try{let B=Pe([...l]),o=`${globalThis.location.origin}/share/${v.did}/${B}`;navigator.share?await navigator.share({title:"My Kipclip Bookmarks Collection",text:`Check out my bookmarks collection tagged with: ${[...l].join(", ")}`,url:o}):(await navigator.clipboard.writeText(o),alert("Share link copied to clipboard!"))}catch(B){B.name!=="AbortError"&&(console.error("Share failed:",B),alert("Failed to share link"))}}function J(B){let o=l.has(B.value);return _("li",{className:`group flex items-center justify-between gap-2 px-3 py-2 rounded-lg transition text-sm whitespace-nowrap flex-shrink-0 cursor-pointer ${o?"bg-blue-600 text-white hover:bg-blue-700":"text-gray-700 hover:bg-gray-100"}`,title:`Created ${new Date(B.createdAt).toLocaleDateString()}`,onClick:()=>{a(B.value)},children:[_("div",{className:"flex items-center gap-2",children:[o&&L("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:L("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),L("span",{children:B.value})]}),_("div",{className:"flex items-center gap-1",children:[L("button",{type:"button",onClick:f=>{f.stopPropagation(),n(B)},className:`opacity-0 group-hover:opacity-100 transition p-1 rounded flex-shrink-0 ${o?"hover:bg-blue-500":"hover:bg-gray-200"}`,title:"Edit tag",children:L("svg",{className:`w-4 h-4 ${o?"text-white":"text-gray-600"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:L("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})}),L("button",{type:"button",draggable:"true",onClick:f=>{f.stopPropagation()},onDragStart:f=>{f.stopPropagation(),f.dataTransfer.effectAllowed="copy",f.dataTransfer.setData("text/plain",B.value);let A=f.target.closest("li");A&&(f.dataTransfer.setDragImage(A,20,20),A.style.opacity="0.5")},onDragEnd:f=>{f.stopPropagation();let A=f.target.closest("li");A&&(A.style.opacity="1")},className:`opacity-0 group-hover:opacity-100 transition p-1 rounded cursor-grab active:cursor-grabbing flex-shrink-0 ${o?"hover:bg-blue-500":"hover:bg-gray-200"}`,title:"Drag to bookmark to tag it",children:L("svg",{className:`w-4 h-4 ${o?"text-white":"text-gray-600"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:L("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8h16M4 16h16"})})})]})]},B.uri)}return _(De,{children:[L("div",{style:{backgroundColor:"var(--sidebar-bg)"},className:"md:hidden w-full sticky top-0 z-10 border-b border-gray-200",children:_("div",{className:"flex items-center gap-3 px-3 py-3 overflow-x-auto",children:[L("h2",{className:"text-sm font-bold text-gray-800 flex-shrink-0",children:"Tags"}),j?L("div",{className:"flex-1 text-xs text-red-600 flex-shrink-0",children:j}):t.length===0?L("div",{className:"flex-1 text-xs text-gray-500 flex-shrink-0",children:"No tags yet"}):L("ul",{className:"flex gap-2 flex-shrink-0",children:t.map(J)}),l.size>0&&_(De,{children:[L("button",{type:"button",onClick:m,className:"flex-shrink-0 px-3 py-1 text-xs bg-gray-200 hover:bg-gray-300 rounded-lg transition text-gray-700 font-medium",title:"Clear all filters",children:"Clear filters"}),_("button",{type:"button",onClick:V,className:"flex-shrink-0 px-3 py-1 text-xs rounded-lg transition text-white font-medium flex items-center gap-1",style:{backgroundColor:"var(--coral)"},title:"Share these filtered bookmarks",children:[L("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:L("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"})}),"Share"]})]}),L("button",{type:"button",onClick:()=>p(!0),className:"flex-shrink-0 ml-auto p-2 hover:bg-gray-100 rounded-lg transition text-gray-600",title:"Create tag",children:L("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:L("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})})]})}),_("aside",{style:{backgroundColor:"var(--sidebar-bg)"},className:"hidden md:flex md:flex-col w-64 border-r border-gray-200 p-4",children:[_("div",{className:"mb-4",children:[L("h2",{className:"text-lg font-bold text-gray-800 mb-3",children:"Tags"}),L("button",{type:"button",onClick:()=>p(!0),className:"w-full btn-primary text-sm py-2 px-4",children:"+ Create Tag"})]}),l.size>0&&_("div",{className:"mb-4 space-y-2",children:[_("button",{type:"button",onClick:m,className:"w-full px-3 py-2 text-sm bg-gray-200 hover:bg-gray-300 rounded-lg transition text-gray-700 font-medium",title:"Clear all filters",children:["Clear filters (",l.size,")"]}),_("button",{type:"button",onClick:V,className:"w-full px-3 py-2 text-sm rounded-lg transition text-white font-medium flex items-center justify-center gap-2",style:{backgroundColor:"var(--coral)"},title:"Share these filtered bookmarks",children:[L("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:L("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"})}),"Share collection"]})]}),j&&_("div",{className:"bg-red-50 border border-red-200 text-red-700 px-3 py-2 rounded text-xs mb-4",children:[j,L("button",{type:"button",onClick:()=>i(),disabled:w,className:"block mt-2 underline disabled:opacity-50",children:w?"Loading...":"Try Again"})]}),L("div",{className:"flex-1 overflow-y-auto",children:t.length===0?_("div",{className:"text-center py-10 text-gray-500 text-sm",children:[L("p",{className:"mb-2",children:"No tags yet"}),L("p",{className:"text-xs",children:"Create your first tag to get started"})]}):L("ul",{className:"space-y-1",children:t.map(J)})})]}),y&&L(je,{onClose:()=>p(!1),onTagAdded:C}),c&&L(Ae,{tag:c,onClose:()=>n(null),onTagUpdated:S,onTagDeleted:I})]})}import{useEffect as ot,useRef as rt,useState as st}from"https://esm.sh/react@19";import{jsx as s,jsxs as T}from"https://esm.sh/react@19/jsx-runtime";function Fe(){let[t,l]=st(!1),a=rt(null),m="javascript:(function(){window.open('https://kipclip.com/save?url='+encodeURIComponent(location.href),'kipclip','width=600,height=700')})()";ot(()=>{if(a.current){let u=a.current.querySelector("a");u&&(u.href=m)}},[m]);async function r(){try{await navigator.clipboard.writeText(m),l(!0),setTimeout(()=>l(!1),2e3)}catch(u){console.error("Failed to copy:",u)}}return T("div",{className:"min-h-screen bg-gray-50",children:[s("header",{className:"bg-white shadow-sm",children:T("div",{className:"max-w-4xl mx-auto px-4 py-4 flex items-center justify-between",children:[T("a",{href:"/",className:"flex items-center gap-2",children:[s("img",{src:"https://res.cloudinary.com/dru3aznlk/image/upload/v1760692589/kip-vignette_h2jwct.png",alt:"Kip logo",className:"w-8 h-8"}),s("h1",{className:"text-2xl font-bold",style:{color:"var(--coral)"},children:"kipclip"})]}),s("a",{href:"/",className:"text-gray-600 hover:text-gray-800 text-sm font-medium",children:"Back to Bookmarks"})]})}),T("main",{className:"max-w-4xl mx-auto px-4 py-12",children:[T("div",{className:"mb-8",children:[s("h2",{className:"text-3xl font-bold text-gray-800 mb-3",children:"Save from Anywhere"}),s("p",{className:"text-gray-600 text-lg",children:"Add bookmarks to kipclip from any website with these tools"})]}),T("div",{className:"bg-white rounded-lg shadow-md p-8 mb-8",children:[T("div",{className:"flex items-start gap-3 mb-6",children:[s("div",{className:"w-10 h-10 bg-coral/10 rounded-lg flex items-center justify-center flex-shrink-0",children:s("svg",{className:"w-6 h-6",style:{color:"var(--coral)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),T("div",{children:[s("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"Browser Bookmarklet"}),s("p",{className:"text-gray-600",children:"Works on all desktop browsers (Chrome, Firefox, Safari, Edge)"})]})]}),s("div",{className:"mb-6",children:T("div",{className:"bg-gray-50 border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[s("p",{className:"text-sm text-gray-600 mb-4 font-medium",children:"Drag this button to your bookmarks bar:"}),s("div",{ref:a,children:T("a",{href:"",onClick:u=>u.preventDefault(),className:"inline-flex items-center gap-2 px-6 py-3 rounded-lg font-bold text-white shadow-lg hover:shadow-xl transition-shadow cursor-move select-none",style:{backgroundColor:"var(--coral)"},draggable:"true",children:[s("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"})}),"Kip it"]})})]})}),s("div",{className:"space-y-4 mb-6",children:T("div",{children:[s("h4",{className:"font-semibold text-gray-800 mb-2",children:"How to install:"}),T("ol",{className:"space-y-2 text-sm text-gray-700",children:[T("li",{className:"flex items-start gap-2",children:[s("span",{className:"font-bold text-coral min-w-[20px]",children:"1."}),T("span",{children:["Make sure your bookmarks bar is visible (press"," ",s("kbd",{className:"px-2 py-1 bg-gray-200 rounded text-xs font-mono",children:"Cmd+Shift+B"})," ","or"," ",s("kbd",{className:"px-2 py-1 bg-gray-200 rounded text-xs font-mono",children:"Ctrl+Shift+B"}),")"]})]}),T("li",{className:"flex items-start gap-2",children:[s("span",{className:"font-bold text-coral min-w-[20px]",children:"2."}),s("span",{children:'Drag the "Kip it" button above to your bookmarks bar'})]}),T("li",{className:"flex items-start gap-2",children:[s("span",{className:"font-bold text-coral min-w-[20px]",children:"3."}),s("span",{children:"When you're on a page you want to save, click the bookmarklet in your bookmarks bar"})]})]})]})}),T("div",{className:"border-t pt-6",children:[s("h4",{className:"font-semibold text-gray-800 mb-3",children:"Alternative installation methods:"}),T("div",{className:"space-y-3 text-sm",children:[s("div",{className:"bg-gray-50 rounded-lg p-4",children:T("p",{className:"text-gray-700 mb-2",children:[s("strong",{children:"Method 2:"})," ",'Right-click the button above and select "Bookmark This Link" or "Add to Bookmarks"']})}),T("div",{className:"bg-gray-50 rounded-lg p-4",children:[T("p",{className:"text-gray-700 mb-3",children:[s("strong",{children:"Method 3:"})," ","Copy the code and create a bookmark manually:"]}),T("div",{className:"flex gap-2",children:[s("code",{className:"flex-1 bg-white px-3 py-2 rounded border text-xs overflow-x-auto",children:m}),s("button",{type:"button",onClick:r,className:"px-4 py-2 bg-gray-800 text-white rounded hover:bg-gray-700 transition flex-shrink-0",children:t?"Copied!":"Copy"})]})]})]})]})]}),T("div",{className:"bg-white rounded-lg shadow-md p-8",children:[T("div",{className:"flex items-start gap-3 mb-6",children:[s("div",{className:"w-10 h-10 bg-coral/10 rounded-lg flex items-center justify-center flex-shrink-0",children:s("svg",{className:"w-6 h-6",style:{color:"var(--coral)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"})})}),T("div",{children:[s("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"Mobile Devices"}),s("p",{className:"text-gray-600",children:"Save bookmarks from your phone or tablet"})]})]}),T("div",{className:"space-y-4",children:[T("div",{className:"bg-gray-50 rounded-lg p-4",children:[s("h4",{className:"font-semibold text-gray-800 mb-3",children:"iOS Shortcut (Recommended):"}),s("p",{className:"text-sm text-gray-700 mb-4",children:`Install the "Kip it" shortcut to save bookmarks from Safari's share menu with one tap.`}),T("a",{href:"https://www.icloud.com/shortcuts/284a2a52e6cb46cc96ebed6f54fc0dfd",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-6 py-3 rounded-lg font-bold text-white shadow-lg hover:shadow-xl transition-shadow",style:{backgroundColor:"var(--coral)"},children:[s("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Get iOS Shortcut"]}),s("p",{className:"text-xs text-gray-600 mt-3",children:'After installing, "Kip it" will appear in your share menu when viewing web pages in Safari.'})]}),T("div",{className:"bg-gray-50 rounded-lg p-4",children:[s("h4",{className:"font-semibold text-gray-800 mb-2",children:"Android (Chrome):"}),T("ol",{className:"space-y-2 text-sm text-gray-700",children:[T("li",{className:"flex items-start gap-2",children:[s("span",{className:"font-bold text-coral min-w-[20px]",children:"1."}),s("span",{children:"Open kipclip.com in Chrome"})]}),T("li",{className:"flex items-start gap-2",children:[s("span",{className:"font-bold text-coral min-w-[20px]",children:"2."}),s("span",{children:'Tap the menu (\u22EE), then "Add to Home screen"'})]}),T("li",{className:"flex items-start gap-2",children:[s("span",{className:"font-bold text-coral min-w-[20px]",children:"3."}),s("span",{children:"When sharing URLs from other apps, kipclip will appear as a share target"})]})]})]})]})]}),s("div",{className:"mt-8 text-center text-sm text-gray-600",children:T("p",{children:["Need help?"," ",s("a",{href:"/",className:"font-medium hover:underline",style:{color:"var(--coral)"},children:"Contact us"})]})})]})]})}import{jsx as $,jsxs as H}from"https://esm.sh/react@19/jsx-runtime";function Re(){return H("div",{className:"min-h-screen bg-gray-50",children:[$("header",{className:"bg-white shadow-sm",children:H("div",{className:"max-w-4xl mx-auto px-4 py-4 flex items-center justify-between",children:[H("a",{href:"/",className:"flex items-center gap-2",children:[$("img",{src:"https://res.cloudinary.com/dru3aznlk/image/upload/v1760692589/kip-vignette_h2jwct.png",alt:"Kip logo",className:"w-8 h-8"}),$("h1",{className:"text-2xl font-bold",style:{color:"var(--coral)"},children:"kipclip"})]}),$("a",{href:"/",className:"text-gray-600 hover:text-gray-800 text-sm font-medium",children:"Back to Bookmarks"})]})}),H("main",{className:"max-w-4xl mx-auto px-4 py-12 space-y-8",children:[H("section",{children:[$("h2",{className:"text-3xl font-bold text-gray-800 mb-3",children:"About kipclip"}),$("p",{className:"text-gray-700 text-lg",children:"kipclip is a simple, open bookmarks app for the AT Protocol. Save links you care about, organize them with tags, and browse them from any device."})]}),H("section",{className:"bg-white rounded-lg shadow-md p-6 space-y-3",children:[$("h3",{className:"text-xl font-bold text-gray-800",children:"How it works"}),H("ul",{className:"list-disc pl-5 text-gray-700 space-y-2",children:[$("li",{children:"Your bookmarks are saved as AT Protocol records in your own PDS (Personal Data Server) under your account."}),$("li",{children:"kipclip uses a community lexicon (schema) so other AT Protocol apps can read these records too."}),$("li",{children:"The app UI is a lightweight web client; the data lives with you in your PDS."})]})]}),H("section",{className:"bg-white rounded-lg shadow-md p-6 space-y-3",children:[$("h3",{className:"text-xl font-bold text-gray-800",children:"Important note on privacy"}),$("p",{className:"text-gray-700",children:"AT Protocol records are public by default. That means bookmarks you save with kipclip are public and discoverable. Please don\u2019t save anything sensitive or private."})]}),H("section",{className:"bg-white rounded-lg shadow-md p-6 space-y-3",children:[$("h3",{className:"text-xl font-bold text-gray-800",children:"Have questions?"}),H("p",{className:"text-gray-700",children:["Check out our"," ",$("a",{href:"/faq",className:"underline hover:text-gray-800",children:"Frequently Asked Questions"})," ","page to learn more about AT Protocol, login, data storage, and more."]})]}),H("section",{className:"bg-white rounded-lg shadow-md p-6",children:[$("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:"Links"}),H("div",{className:"flex flex-col sm:flex-row gap-3",children:[H("a",{href:"https://github.com/tijs/kipclip-appview",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg font-medium text-white hover:opacity-95",style:{backgroundColor:"var(--coral)"},children:[$("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":!0,children:$("path",{d:"M12 .5C5.73.5.94 5.29.94 11.56c0 4.86 3.15 8.98 7.52 10.43.55.1.75-.24.75-.53 0-.26-.01-1.12-.02-2.03-3.06.67-3.71-1.3-3.71-1.3-.5-1.28-1.23-1.63-1.23-1.63-1.01-.69.08-.68.08-.68 1.12.08 1.71 1.15 1.71 1.15.99 1.7 2.6 1.21 3.23.93.1-.72.39-1.21.71-1.49-2.44-.28-5-1.22-5-5.43 0-1.2.43-2.18 1.14-2.95-.11-.28-.5-1.43.11-2.98 0 0 .94-.3 3.07 1.13.89-.25 1.85-.37 2.81-.37.95 0 1.92.12 2.81.37 2.12-1.43 3.06-1.13 3.06-1.13.62 1.55.23 2.7.12 2.98.71.77 1.14 1.75 1.14 2.95 0 4.22-2.57 5.15-5.01 5.42.4.35.76 1.04.76 2.1 0 1.52-.01 2.74-.01 3.12 0 .29.2.64.76.53 4.36-1.45 7.51-5.57 7.51-10.43C23.06 5.29 18.27.5 12 .5z"})}),"GitHub Repository"]}),H("a",{href:"https://ko-fi.com/tijsteulings/tip",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg font-medium text-white hover:opacity-95",style:{backgroundColor:"#13C3FF"},children:[$("img",{src:"https://storage.ko-fi.com/cdn/brandasset/v2/kofi_symbol.png",alt:"Ko-fi",className:"w-5 h-5"}),"Support this project"]}),H("a",{href:"https://bsky.app/profile/tijs.org",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg font-medium text-white hover:opacity-95",style:{backgroundColor:"#1185FF"},children:[$("span",{"aria-hidden":!0,className:"text-lg",children:"\u{1F98B}"}),"made bij tijs.org"]})]})]})]})]})}import{useEffect as nt,useState as me}from"https://esm.sh/react@19";import{jsx as P,jsxs as K}from"https://esm.sh/react@19/jsx-runtime";function $e(){let[t,l]=me(null),[a,m]=me(!0),[r,u]=me(!1),[d,k]=me(!1),[v,y]=me(null),[p,c]=me("");nt(()=>{let e=new URLSearchParams(globalThis.location.search).get("url");e&&c(e),n()},[]);async function n(){try{let w=await fetch("/api/auth/session",{credentials:"include"});if(w.ok){let e=await w.json();l({did:e.did,handle:e.handle})}else{console.warn("Session check failed:",{status:w.status,statusText:w.statusText});try{let e=await w.json();console.warn("Session error details:",e)}catch{}}}catch(w){console.error("Failed to check session:",w)}finally{m(!1)}}async function j(w){if(w.preventDefault(),!!p.trim()){u(!0),y(null);try{let e=await fetch("/api/bookmarks",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({url:p.trim()})});if(e.status===401){try{let C=await e.json();console.warn("Authentication error during save:",C)}catch{}let i=`/login?redirect=${encodeURIComponent(globalThis.location.pathname+globalThis.location.search)}`;globalThis.location.href=i;return}if(!e.ok){let i=await e.json();throw console.error("Failed to save bookmark:",i),new Error(i.message||i.error||"Failed to add bookmark")}k(!0)}catch(e){y(e.message),u(!1)}}}function R(){globalThis.close()}if(a)return P("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:P("div",{className:"spinner"})});if(!t){let w=`/?redirect=${encodeURIComponent(globalThis.location.pathname+globalThis.location.search)}`;return P("div",{className:"flex items-center justify-center min-h-screen bg-gray-50 p-4",children:K("div",{className:"bg-white rounded-lg max-w-md w-full p-8 shadow-lg text-center",children:[K("div",{className:"mb-6",children:[P("img",{src:"https://res.cloudinary.com/dru3aznlk/image/upload/v1760692589/kip-vignette_h2jwct.png",alt:"Kip logo",className:"w-16 h-16 mx-auto mb-4"}),P("h1",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Login Required"}),P("p",{className:"text-gray-600",children:"Sign in to save bookmarks to kipclip"})]}),P("a",{href:w,className:"inline-block w-full btn-primary py-3 px-4 rounded-lg text-center",children:"Sign in"})]})})}return d?P("div",{className:"flex items-center justify-center min-h-screen bg-gray-50 p-4",children:K("div",{className:"bg-white rounded-lg max-w-md w-full p-8 shadow-lg text-center",children:[K("div",{className:"mb-6",children:[P("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:P("svg",{className:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:P("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),P("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Bookmark Saved!"}),P("p",{className:"text-gray-600 mb-6",children:"Your bookmark has been saved to kipclip"})]}),K("div",{className:"space-y-3",children:[P("button",{type:"button",onClick:R,className:"w-full px-4 py-3 rounded-lg border border-gray-300 text-gray-700 font-medium hover:bg-gray-50 transition",children:"Close Window"}),P("a",{href:"/",className:"block w-full px-4 py-3 rounded-lg btn-primary text-center",children:"View All Bookmarks"})]})]})}):P("div",{className:"flex items-center justify-center min-h-screen bg-gray-50 p-4",children:K("div",{className:"bg-white rounded-lg max-w-md w-full p-6 shadow-lg",children:[K("div",{className:"flex items-center justify-between mb-6",children:[K("div",{className:"flex items-center gap-2",children:[P("img",{src:"https://res.cloudinary.com/dru3aznlk/image/upload/v1760692589/kip-vignette_h2jwct.png",alt:"Kip logo",className:"w-8 h-8"}),P("h2",{className:"text-xl font-bold text-gray-800",children:"Save Bookmark"})]}),P("button",{type:"button",onClick:R,className:"text-gray-400 hover:text-gray-600 text-2xl",disabled:r,children:"\xD7"})]}),K("div",{className:"mb-4 text-sm text-gray-600",children:["Signed in as ",K("span",{className:"font-medium",children:["@",t.handle]})]}),K("form",{onSubmit:j,className:"space-y-4",children:[K("div",{children:[P("label",{htmlFor:"url",className:"block text-sm font-medium text-gray-700 mb-2",children:"URL"}),P("input",{type:"url",id:"url",value:p,onChange:w=>c(w.target.value),placeholder:"https://example.com",className:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-coral focus:border-transparent outline-none transition",disabled:r,autoFocus:!0,required:!0})]}),v&&P("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm",children:v}),P("button",{type:"submit",className:"w-full btn-primary py-3 disabled:opacity-50",disabled:r||!p.trim(),children:r?K("span",{className:"flex items-center justify-center gap-2",children:[P("div",{className:"spinner w-5 h-5 border-2"}),"Saving..."]}):"Save Bookmark"})]}),P("p",{className:"text-xs text-gray-500 mt-4 text-center",children:"The page title and description will be automatically fetched"})]})})}import{jsx as N,jsxs as D}from"https://esm.sh/react@19/jsx-runtime";function ze(){return D("div",{className:"min-h-screen bg-gray-50",children:[N("header",{className:"bg-white shadow-sm",children:D("div",{className:"max-w-4xl mx-auto px-4 py-4 flex items-center justify-between",children:[D("a",{href:"/",className:"flex items-center gap-2",children:[N("img",{src:"https://res.cloudinary.com/dru3aznlk/image/upload/v1760692589/kip-vignette_h2jwct.png",alt:"Kip logo",className:"w-8 h-8"}),N("h1",{className:"text-2xl font-bold",style:{color:"var(--coral)"},children:"kipclip"})]}),N("a",{href:"/",className:"text-gray-600 hover:text-gray-800 text-sm font-medium",children:"Back to Home"})]})}),D("main",{className:"max-w-4xl mx-auto px-4 py-12 space-y-8",children:[D("section",{children:[N("h2",{className:"text-3xl font-bold text-gray-800 mb-3",children:"Frequently Asked Questions"}),N("p",{className:"text-gray-700 text-lg",children:"Everything you need to know about using kipclip with Bluesky and AT Protocol."})]}),D("section",{className:"bg-white rounded-lg shadow-md p-6 space-y-6",children:[D("div",{children:[N("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"What is AT Protocol?"}),N("p",{className:"text-gray-700",children:"AT Protocol is an open, decentralized social networking protocol. It's the technology that powers Bluesky and allows your data to be portable across different apps and services. Think of it like email - you own your address and can use it with different email clients."})]}),D("div",{children:[N("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"Can I use my Bluesky account to sign in?"}),N("p",{className:"text-gray-700",children:"Yes! Your Bluesky account is an AT Protocol account. Just enter your Bluesky handle (like alice.bsky.social) to sign in. kipclip works seamlessly with Bluesky because they both use AT Protocol."})]}),D("div",{children:[N("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"How does the login process work?"}),N("p",{className:"text-gray-700",children:"When you sign in, kipclip uses OAuth to securely connect to your Personal Data Server (PDS). This is the same secure login method used by apps like Twitter or Google. You'll be redirected to your PDS to authorize kipclip, then redirected back. Your password is never shared with kipclip."})]}),D("div",{children:[N("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"Where are my bookmarks stored?"}),N("p",{className:"text-gray-700",children:"Your bookmarks are stored in your own Personal Data Server (PDS), not on kipclip's servers. If you use Bluesky, that's your Bluesky PDS. This means you own your data and can access it with other AT Protocol apps that support the bookmark format."})]}),D("div",{children:[N("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"Can I share my bookmarks?"}),N("p",{className:"text-gray-700",children:"Yes! You can tag your bookmarks with custom labels, and kipclip automatically creates shareable collections based on those tags. Each collection gets its own unique URL with custom preview cards when shared on social media, making it easy to share curated lists with others."})]}),D("div",{children:[N("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"Can I use a custom domain as my handle?"}),N("p",{className:"text-gray-700",children:"Yes! If you've set up a custom domain handle with AT Protocol (like yourname.com), you can use it to sign in to kipclip. Just enter your custom domain handle instead of a .bsky.social handle."})]}),D("div",{children:[N("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"Is my data portable?"}),N("p",{className:"text-gray-700",children:"Absolutely! Because your bookmarks are stored using the community bookmark lexicon on your PDS, you can access them with any other AT Protocol app that supports this format. You're not locked into kipclip - your data is truly yours."})]}),D("div",{children:[N("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"What happens if I move to a different PDS?"}),D("p",{className:"text-gray-700",children:["Your bookmarks move with you! When you migrate your account to a different PDS (using tools like"," ",N("a",{href:"https://pdsmoover.com",target:"_blank",rel:"noopener",className:"underline hover:text-gray-800",children:"pdsmoover.com"}),"), all your data including bookmarks transfers automatically. They're tied to your account, not to kipclip or any specific server."]})]}),D("div",{children:[N("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"What happens to my bookmarks if kipclip shuts down?"}),N("p",{className:"text-gray-700",children:"Your bookmarks remain safe on your PDS - they're just JSON files stored with your account data. You could use another app that supports the community bookmark lexicon, or even build your own tool. Since kipclip is open source, you or anyone else could also host a copy of it."})]}),D("div",{children:[N("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"Are my bookmarks private?"}),N("p",{className:"text-gray-700",children:"No, AT Protocol records are public by default. This means bookmarks you save with kipclip can be discovered by others. Please don't save anything sensitive or private. Think of kipclip bookmarks like public social media posts."})]}),D("div",{children:[N("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"What is the community bookmark lexicon?"}),D("p",{className:"text-gray-700",children:["A lexicon is like a data schema in AT Protocol. The"," ",N("a",{href:"https://github.com/lexicon-community/lexicon/blob/main/community/lexicon/bookmarks/bookmark.json",target:"_blank",rel:"noopener noreferrer",className:"underline hover:text-gray-800",children:"community bookmark lexicon"})," ","defines the standard format for bookmarks. By using this standard, kipclip ensures your bookmarks can be read by other compatible apps."]})]}),D("div",{children:[N("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"Does kipclip support RSS feeds?"}),N("p",{className:"text-gray-700",children:'Absolutely! Every shared collection has its own RSS feed that you can subscribe to in your favorite RSS reader. Simply add "/rss" to the end of any collection URL to access the feed. RSS readers will also auto-discover the feed when you visit a collection page.'})]}),D("div",{children:[N("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"Is kipclip affiliated with Bluesky?"}),N("p",{className:"text-gray-700",children:"No, kipclip is an independent project built on top of AT Protocol. It's designed to work with any AT Protocol account, including Bluesky accounts, but it's not officially affiliated with Bluesky Social PBC."})]})]}),D("section",{className:"bg-white rounded-lg shadow-md p-6",children:[N("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:"Still have questions?"}),D("p",{className:"text-gray-700 mb-4",children:["Check out the"," ",N("a",{href:"/about",className:"underline hover:text-gray-800",children:"About page"})," ","for more information, or reach out on"," ",N("a",{href:"https://bsky.app/profile/tijs.org",target:"_blank",rel:"noopener noreferrer",className:"underline hover:text-gray-800",children:"Bluesky"}),"."]})]})]})]})}import{useEffect as Ie,useState as pe}from"https://esm.sh/react@19";import{jsx as x,jsxs as Q}from"https://esm.sh/react@19/jsx-runtime";function Ue({did:t,encodedTags:l}){let[a,m]=pe([]),[r,u]=pe(""),[d,k]=pe([]),[v,y]=pe(!0),[p,c]=pe(null);Ie(()=>{j()},[t,l]),Ie(()=>{if(!r||d.length===0)return;let e=`${r}'s Bookmarks Collection: ${d.join(", ")}`,i=a.length>0?`${a.length} bookmark${a.length===1?"":"s"} tagged with ${d.join(", ")}`:`Bookmark collection tagged with ${d.join(", ")}`,C=globalThis.location.href;return document.title=e,n("og:title",e),n("og:description",i),n("og:url",C),n("og:type","website"),n("og:site_name","kipclip"),n("twitter:card","summary","name"),n("twitter:title",e,"name"),n("twitter:description",i,"name"),()=>{document.title="kipclip"}},[r,d,a.length]);function n(e,i,C="property"){let S=document.querySelector(`meta[${C}="${e}"]`);S||(S=document.createElement("meta"),S.setAttribute(C,e),document.head.appendChild(S)),S.content=i}async function j(){y(!0),c(null);try{let e=await fetch(`/api/share/${t}/${l}`);if(!e.ok){let C=await e.json();throw new Error(C.error||"Failed to load shared bookmarks")}let i=await e.json();m(i.bookmarks),u(i.handle),k(i.tags)}catch(e){c(e.message)}finally{y(!1)}}function R(e,i){e.stopPropagation(),globalThis.open(i,"_blank","noopener,noreferrer")}async function w(e,i){e.stopPropagation();let C={title:i.title||new URL(i.subject).hostname,text:i.description?`${i.title||new URL(i.subject).hostname}

${i.description}`:i.title||new URL(i.subject).hostname,url:i.subject};if(navigator.share)try{await navigator.share(C)}catch(S){S.name!=="AbortError"&&console.error("Share failed:",S)}else try{let S=`${C.title}
${C.text}
${C.url}`;await navigator.clipboard.writeText(S),alert("Link copied to clipboard!")}catch(S){console.error("Failed to copy:",S),alert("Sharing not supported on this browser")}}return v?x("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:x("div",{className:"spinner"})}):p?x("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:Q("div",{className:"text-center py-20 px-4",children:[x("div",{className:"mb-6",children:x("span",{className:"text-6xl",children:"\u26A0\uFE0F"})}),x("h3",{className:"text-xl font-semibold text-gray-700 mb-2",children:"Error Loading Bookmarks"}),x("p",{className:"text-red-600 mb-6",children:p}),x("button",{type:"button",onClick:j,className:"btn-primary",children:"Try Again"})]})}):x("div",{className:"min-h-screen bg-gray-50",children:Q("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[Q("div",{className:"mb-8",children:[Q("div",{className:"flex items-center gap-2 text-sm text-gray-600 mb-2",children:[x("span",{children:"Shared by"}),x("a",{href:`https://bsky.app/profile/${r}`,target:"_blank",rel:"noopener noreferrer",className:"font-semibold text-blue-600 hover:text-blue-800 hover:underline",children:r})]}),x("h1",{className:"text-3xl font-bold text-gray-800 mb-4",children:"Bookmarks Collection"}),Q("div",{className:"flex flex-wrap gap-2",children:[x("span",{className:"text-sm text-gray-600",children:"Filtered by tags:"}),d.map(e=>x("span",{className:"px-3 py-1 text-sm rounded-full bg-blue-100 text-blue-700 font-medium",children:e},e))]})]}),a.length===0?Q("div",{className:"text-center py-20",children:[x("div",{className:"mb-6",children:x("span",{className:"text-6xl",children:"\u{1F4DA}"})}),x("h3",{className:"text-xl font-semibold text-gray-700 mb-2",children:"No bookmarks found"}),x("p",{className:"text-gray-500",children:"This user hasn't shared any bookmarks with these tags yet."})]}):x("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:a.map(e=>Q("div",{className:"card hover:scale-[1.02] transition-all group relative",children:[Q("div",{className:"mb-3",children:[x("h3",{className:"font-semibold text-gray-800 truncate mb-1",children:e.title||new URL(e.subject).hostname}),x("div",{className:"text-sm text-gray-500 truncate",children:e.subject})]}),e.description&&x("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2",children:e.description}),x("div",{className:"text-xs text-gray-400",children:new Date(e.createdAt).toLocaleDateString()}),Q("div",{className:"hidden md:group-hover:flex absolute bottom-2 right-2 gap-1",children:[x("button",{type:"button",onClick:i=>R(i,e.subject),className:"w-7 h-7 flex items-center justify-center text-gray-600 hover:text-gray-900 bg-white/90 hover:bg-white rounded-md transition-colors shadow-sm",title:"Visit bookmark",children:x("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:x("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})}),x("button",{type:"button",onClick:i=>w(i,e),className:"w-7 h-7 flex items-center justify-center text-gray-600 hover:text-gray-900 bg-white/90 hover:bg-white rounded-md transition-colors shadow-sm",title:"Share bookmark",children:x("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:x("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"})})})]}),Q("div",{className:"flex md:hidden absolute bottom-2 right-2 gap-1",children:[x("button",{type:"button",onClick:i=>R(i,e.subject),className:"w-8 h-8 flex items-center justify-center text-gray-600 hover:text-gray-900 bg-white/90 hover:bg-white rounded-md transition-colors shadow-sm",title:"Visit bookmark",children:x("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:x("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})}),x("button",{type:"button",onClick:i=>w(i,e),className:"w-8 h-8 flex items-center justify-center text-gray-600 hover:text-gray-900 bg-white/90 hover:bg-white rounded-md transition-colors shadow-sm",title:"Share bookmark",children:x("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:x("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"})})})]})]},e.uri))}),x("div",{className:"mt-12 pt-8 border-t border-gray-200 text-center",children:Q("p",{className:"text-sm text-gray-600",children:["Create your own bookmark collection at"," ",x("a",{href:"/",className:"text-blue-600 hover:underline font-medium",children:"kipclip.com"})]})})]})})}import{jsx as O,jsxs as ye}from"https://esm.sh/react@19/jsx-runtime";function He(){let{session:t,setSession:l,loadInitialData:a}=te(),[m,r]=we(!0),[u,d]=we(!1),[k,v]=we(globalThis.location.pathname);We(()=>{y();let c=()=>{v(globalThis.location.pathname)};return globalThis.addEventListener("popstate",c),()=>globalThis.removeEventListener("popstate",c)},[]),We(()=>{t&&!u&&(d(!0),a().catch(c=>{console.error("Failed to load initial data:",c)}).finally(()=>{d(!1)}))},[t]);async function y(){try{let c=await fetch("/api/auth/session");if(c.ok){let n=await c.json();l({did:n.did,handle:n.handle})}}catch(c){console.error("Failed to check session:",c)}finally{r(!1)}}async function p(){try{await fetch("/api/auth/logout",{method:"POST"}),l(null)}catch(c){console.error("Failed to logout:",c)}}if(k==="/tools")return O(Fe,{});if(k==="/about")return O(Re,{});if(k==="/faq")return O(ze,{});if(k==="/save")return O($e,{});if(k.startsWith("/share/")){let c=k.split("/");if(c.length===4){let n=c[2],j=c[3];return O(Ue,{did:n,encodedTags:j})}}return m||u?O("div",{className:"flex items-center justify-center min-h-screen",children:O("div",{className:"spinner"})}):t?ye("div",{className:"min-h-screen md:h-screen flex flex-col",children:[O("header",{className:"bg-white shadow-sm flex-shrink-0",children:ye("div",{className:"px-4 py-4 flex items-center justify-between",children:[ye("div",{className:"flex items-center gap-2",children:[O("img",{src:"https://res.cloudinary.com/dru3aznlk/image/upload/v1760692589/kip-vignette_h2jwct.png",alt:"Kip logo",className:"w-8 h-8"}),O("h1",{className:"text-2xl font-bold",style:{color:"var(--coral)"},children:"kipclip"})]}),O(Be,{handle:t.handle,onLogout:p})]})}),ye("div",{className:"flex flex-col md:flex-row flex-1 md:overflow-hidden",children:[O(Me,{}),O("main",{className:"flex-1 px-4 py-8 max-w-7xl mx-auto w-full md:overflow-y-auto",children:O(Le,{})})]})]}):O(Ne,{})}import{jsx as Oe}from"https://esm.sh/react@19/jsx-runtime";typeof document<"u"&&it(document.getElementById("root")).render(Oe(Ee,{children:Oe(He,{})}));
//# sourceMappingURL=bundle.js.map
